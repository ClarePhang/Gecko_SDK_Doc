<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Silicon Labs EFM32 emlib Peripheral Library: release/EM_CMSIS_P1_4.0.0/emlib/src/em_opamp.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_99634199317e4752b1934502e0d836c4.html">release</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_ef8fe3615cb8c81ea34985a2c039aa1a.html">EM_CMSIS_P1_4.0.0</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_e920a447b543d2a9629bb351881860c5.html">emlib</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_787edd173f767fae4d0b9f311e27bdfa.html">src</a>
  </div>
</div>
<div class="contents">
<h1>em_opamp.c</h1><a href="em__opamp_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**************************************************************************/</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;em_device.h&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#if defined( OPAMP_PRESENT ) &amp;&amp; ( OPAMP_COUNT == 1 )</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="em__system_8h.html" title="System API.">em_system.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="em__assert_8h.html" title="EFM32 peripheral API &amp;quot;assert&amp;quot; implementation.">em_assert.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="em__opamp_8h.html" title="Operational Amplifier (OPAMP) peripheral API.">em_opamp.h</a>&quot;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">/***************************************************************************/</span>
<a name="l00047"></a>00047 <span class="comment">/***************************************************************************/</span>
<a name="l00193"></a>00193 <span class="comment">/*******************************************************************************</span>
<a name="l00194"></a>00194 <span class="comment"> **************************   GLOBAL FUNCTIONS   *******************************</span>
<a name="l00195"></a>00195 <span class="comment"> ******************************************************************************/</span>
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="comment">/***************************************************************************/</span>
<a name="l00207"></a><a class="code" href="group__OPAMP.html#ga814b73bd0007ff07c24beeae1175f0d2">00207</a> <span class="keywordtype">void</span> <a class="code" href="group__OPAMP.html#ga814b73bd0007ff07c24beeae1175f0d2" title="Disable an Operational Amplifier.">OPAMP_Disable</a>( DAC_TypeDef *dac, <a class="code" href="group__OPAMP.html#ga8ab8b812547585753acc6893f340e32c">OPAMP_TypeDef</a> opa )
<a name="l00208"></a>00208 {
<a name="l00209"></a>00209   EFM_ASSERT( DAC_REF_VALID( dac ) );
<a name="l00210"></a>00210   EFM_ASSERT( DAC_OPA_VALID( opa ) );
<a name="l00211"></a>00211 
<a name="l00212"></a>00212   <span class="keywordflow">if</span> ( opa == <a class="code" href="group__OPAMP.html#gga8ab8b812547585753acc6893f340e32ca61aeb788d20781fee0b8bdcfe6b80d45">OPA0</a> )
<a name="l00213"></a>00213   {
<a name="l00214"></a>00214     dac-&gt;CH0CTRL &amp;= ~DAC_CH0CTRL_EN;
<a name="l00215"></a>00215     dac-&gt;OPACTRL &amp;= ~DAC_OPACTRL_OPA0EN;
<a name="l00216"></a>00216   }
<a name="l00217"></a>00217   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( opa == <a class="code" href="group__OPAMP.html#gga8ab8b812547585753acc6893f340e32cac3a183a98505fc44f7f6b3ca61878d62">OPA1</a> )
<a name="l00218"></a>00218   {
<a name="l00219"></a>00219     dac-&gt;CH1CTRL &amp;= ~DAC_CH1CTRL_EN;
<a name="l00220"></a>00220     dac-&gt;OPACTRL &amp;= ~DAC_OPACTRL_OPA1EN;
<a name="l00221"></a>00221   }
<a name="l00222"></a>00222   <span class="keywordflow">else</span> <span class="comment">/* OPA2 */</span>
<a name="l00223"></a>00223   {
<a name="l00224"></a>00224     dac-&gt;OPACTRL &amp;= ~DAC_OPACTRL_OPA2EN;
<a name="l00225"></a>00225   }
<a name="l00226"></a>00226 }
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="comment">/***************************************************************************/</span>
<a name="l00268"></a><a class="code" href="group__OPAMP.html#gae4961677bcc2a81a88093ab23195e2c0">00268</a> <span class="keywordtype">void</span> <a class="code" href="group__OPAMP.html#gae4961677bcc2a81a88093ab23195e2c0" title="Configure and enable an Operational Amplifier.">OPAMP_Enable</a>( DAC_TypeDef *dac, <a class="code" href="group__OPAMP.html#ga8ab8b812547585753acc6893f340e32c">OPAMP_TypeDef</a> opa, <span class="keyword">const</span> <a class="code" href="structOPAMP__Init__TypeDef.html">OPAMP_Init_TypeDef</a> *init )
<a name="l00269"></a>00269 {
<a name="l00270"></a>00270   uint32_t offset;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272   EFM_ASSERT( DAC_REF_VALID( dac ) );
<a name="l00273"></a>00273   EFM_ASSERT( DAC_OPA_VALID( opa ) );
<a name="l00274"></a>00274   EFM_ASSERT( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a24798b555f452ada8fa38c63c6ab6ff9">bias</a> &lt;= ( _DAC_BIASPROG_BIASPROG_MASK  &gt;&gt;
<a name="l00275"></a>00275                               _DAC_BIASPROG_BIASPROG_SHIFT    ) );
<a name="l00276"></a>00276 
<a name="l00277"></a>00277   <span class="keywordflow">if</span> ( opa == <a class="code" href="group__OPAMP.html#gga8ab8b812547585753acc6893f340e32ca61aeb788d20781fee0b8bdcfe6b80d45">OPA0</a> )
<a name="l00278"></a>00278   {
<a name="l00279"></a>00279     EFM_ASSERT( ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a30a43beed36d471a1b0d1d64d451baf1">outPen</a> &amp; ~_DAC_OPA0MUX_OUTPEN_MASK ) == 0 );
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     dac-&gt;BIASPROG = ( dac-&gt;BIASPROG
<a name="l00282"></a>00282                       &amp; ~( _DAC_BIASPROG_BIASPROG_MASK             |
<a name="l00283"></a>00283                             DAC_BIASPROG_HALFBIAS                    )  ) |
<a name="l00284"></a>00284                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a24798b555f452ada8fa38c63c6ab6ff9">bias</a>      &lt;&lt; _DAC_BIASPROG_BIASPROG_SHIFT   ) |
<a name="l00285"></a>00285                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a880893ce7955f55338fc6ec772ba2f49">halfBias</a>   ? DAC_BIASPROG_HALFBIAS      : 0 );
<a name="l00286"></a>00286 
<a name="l00287"></a>00287     <span class="keywordflow">if</span> ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#add09b8acf3961a7b67f4275b534ed064">defaultOffset</a> )
<a name="l00288"></a>00288     {
<a name="l00289"></a>00289       offset = <a class="code" href="group__SYSTEM.html#ga786913c991338e29650617d89aec3768" title="Get factory calibration value for a given peripheral register.">SYSTEM_GetCalibrationValue</a>( &amp;dac-&gt;CAL );
<a name="l00290"></a>00290       dac-&gt;CAL = ( dac-&gt;CAL &amp; ~_DAC_CAL_CH0OFFSET_MASK ) |
<a name="l00291"></a>00291                  ( offset   &amp;  _DAC_CAL_CH0OFFSET_MASK );
<a name="l00292"></a>00292     }
<a name="l00293"></a>00293     <span class="keywordflow">else</span>
<a name="l00294"></a>00294     {
<a name="l00295"></a>00295       EFM_ASSERT( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aa0980b3036467a9bd446d6dca743449f">offset</a> &lt;= ( _DAC_CAL_CH0OFFSET_MASK &gt;&gt;
<a name="l00296"></a>00296                                     _DAC_CAL_CH0OFFSET_SHIFT   ) );
<a name="l00297"></a>00297 
<a name="l00298"></a>00298       dac-&gt;CAL = ( dac-&gt;CAL      &amp; ~_DAC_CAL_CH0OFFSET_MASK  ) |
<a name="l00299"></a>00299                  ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aa0980b3036467a9bd446d6dca743449f">offset</a> &lt;&lt;  _DAC_CAL_CH0OFFSET_SHIFT );
<a name="l00300"></a>00300     }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302     dac-&gt;OPA0MUX  = (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ae2462a6a70fb61bc77b97e1e7ee40523">resSel</a>                                |
<a name="l00303"></a>00303                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a348668e49c063b1393a62d74ca14fbf1">outMode</a>                               |
<a name="l00304"></a>00304                     init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a30a43beed36d471a1b0d1d64d451baf1">outPen</a>                                          |
<a name="l00305"></a>00305                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aef9d4d625bd15dce05797699e70088ea">resInMux</a>                              |
<a name="l00306"></a>00306                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a46da494ce7f49c18b98d8e6c378624a3">negSel</a>                                |
<a name="l00307"></a>00307                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a741a04cddfb63d061d62332bac59378c">posSel</a>                                |
<a name="l00308"></a>00308                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aa35bd216eb267a79ad629d7dfb6cfba8">nextOut</a>     ? DAC_OPA0MUX_NEXTOUT       : 0 ) |
<a name="l00309"></a>00309                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ab07747ad69d9f957057cb91fec255e49">npEn</a>        ? DAC_OPA0MUX_NPEN          : 0 ) |
<a name="l00310"></a>00310                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a7df75dbac7c4f26ceccd021ed2267a88">ppEn</a>        ? DAC_OPA0MUX_PPEN          : 0 );
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     dac-&gt;CH0CTRL |= DAC_CH0CTRL_EN;
<a name="l00313"></a>00313     dac-&gt;OPACTRL  = ( dac-&gt;OPACTRL
<a name="l00314"></a>00314                       &amp; ~(  DAC_OPACTRL_OPA0SHORT                  |
<a name="l00315"></a>00315                            _DAC_OPACTRL_OPA0LPFDIS_MASK            |
<a name="l00316"></a>00316                             DAC_OPACTRL_OPA0HCMDIS                   )  ) |
<a name="l00317"></a>00317                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ac5bf6d898d9d81323fcb48e440ebea24">shortInputs</a> ?  DAC_OPACTRL_OPA0SHORT    : 0 ) |
<a name="l00318"></a>00318                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a94ac20bd14716b2826e9100ab5a69efe">lpfPosPadDisable</a> ?
<a name="l00319"></a>00319                                      DAC_OPACTRL_OPA0LPFDIS_PLPFDIS : 0 ) |
<a name="l00320"></a>00320                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ae7f7cea11df855842be350561162d118">lpfNegPadDisable</a> ?
<a name="l00321"></a>00321                                      DAC_OPACTRL_OPA0LPFDIS_NLPFDIS : 0 ) |
<a name="l00322"></a>00322                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a05ded6707730217045bf21a46352b59c">hcmDisable</a>  ?  DAC_OPACTRL_OPA0HCMDIS   : 0 ) |
<a name="l00323"></a>00323                     ( DAC_OPACTRL_OPA0EN                                );
<a name="l00324"></a>00324   }
<a name="l00325"></a>00325   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( opa == <a class="code" href="group__OPAMP.html#gga8ab8b812547585753acc6893f340e32cac3a183a98505fc44f7f6b3ca61878d62">OPA1</a> )
<a name="l00326"></a>00326   {
<a name="l00327"></a>00327     EFM_ASSERT( ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a30a43beed36d471a1b0d1d64d451baf1">outPen</a> &amp; ~_DAC_OPA1MUX_OUTPEN_MASK ) == 0 );
<a name="l00328"></a>00328 
<a name="l00329"></a>00329     dac-&gt;BIASPROG = ( dac-&gt;BIASPROG
<a name="l00330"></a>00330                       &amp; ~( _DAC_BIASPROG_BIASPROG_MASK             |
<a name="l00331"></a>00331                             DAC_BIASPROG_HALFBIAS                    )  ) |
<a name="l00332"></a>00332                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a24798b555f452ada8fa38c63c6ab6ff9">bias</a>      &lt;&lt; _DAC_BIASPROG_BIASPROG_SHIFT   ) |
<a name="l00333"></a>00333                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a880893ce7955f55338fc6ec772ba2f49">halfBias</a>   ? DAC_BIASPROG_HALFBIAS      : 0 );
<a name="l00334"></a>00334 
<a name="l00335"></a>00335     <span class="keywordflow">if</span> ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#add09b8acf3961a7b67f4275b534ed064">defaultOffset</a> )
<a name="l00336"></a>00336     {
<a name="l00337"></a>00337       offset = <a class="code" href="group__SYSTEM.html#ga786913c991338e29650617d89aec3768" title="Get factory calibration value for a given peripheral register.">SYSTEM_GetCalibrationValue</a>( &amp;dac-&gt;CAL );
<a name="l00338"></a>00338       dac-&gt;CAL = ( dac-&gt;CAL &amp; ~_DAC_CAL_CH1OFFSET_MASK ) |
<a name="l00339"></a>00339                  ( offset   &amp;  _DAC_CAL_CH1OFFSET_MASK );
<a name="l00340"></a>00340     }
<a name="l00341"></a>00341     <span class="keywordflow">else</span>
<a name="l00342"></a>00342     {
<a name="l00343"></a>00343       EFM_ASSERT( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aa0980b3036467a9bd446d6dca743449f">offset</a> &lt;= ( _DAC_CAL_CH1OFFSET_MASK &gt;&gt;
<a name="l00344"></a>00344                                     _DAC_CAL_CH1OFFSET_SHIFT   ) );
<a name="l00345"></a>00345 
<a name="l00346"></a>00346       dac-&gt;CAL = ( dac-&gt;CAL      &amp; ~_DAC_CAL_CH1OFFSET_MASK  ) |
<a name="l00347"></a>00347                  ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aa0980b3036467a9bd446d6dca743449f">offset</a> &lt;&lt;  _DAC_CAL_CH1OFFSET_SHIFT );
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     dac-&gt;OPA1MUX  = (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ae2462a6a70fb61bc77b97e1e7ee40523">resSel</a>                                |
<a name="l00351"></a>00351                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a348668e49c063b1393a62d74ca14fbf1">outMode</a>                               |
<a name="l00352"></a>00352                     init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a30a43beed36d471a1b0d1d64d451baf1">outPen</a>                                          |
<a name="l00353"></a>00353                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aef9d4d625bd15dce05797699e70088ea">resInMux</a>                              |
<a name="l00354"></a>00354                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a46da494ce7f49c18b98d8e6c378624a3">negSel</a>                                |
<a name="l00355"></a>00355                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a741a04cddfb63d061d62332bac59378c">posSel</a>                                |
<a name="l00356"></a>00356                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aa35bd216eb267a79ad629d7dfb6cfba8">nextOut</a>     ? DAC_OPA1MUX_NEXTOUT       : 0 ) |
<a name="l00357"></a>00357                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ab07747ad69d9f957057cb91fec255e49">npEn</a>        ? DAC_OPA1MUX_NPEN          : 0 ) |
<a name="l00358"></a>00358                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a7df75dbac7c4f26ceccd021ed2267a88">ppEn</a>        ? DAC_OPA1MUX_PPEN          : 0 );
<a name="l00359"></a>00359 
<a name="l00360"></a>00360     dac-&gt;CH1CTRL |= DAC_CH1CTRL_EN;
<a name="l00361"></a>00361     dac-&gt;OPACTRL  = ( dac-&gt;OPACTRL
<a name="l00362"></a>00362                       &amp; ~(  DAC_OPACTRL_OPA1SHORT                  |
<a name="l00363"></a>00363                            _DAC_OPACTRL_OPA1LPFDIS_MASK            |
<a name="l00364"></a>00364                              DAC_OPACTRL_OPA1HCMDIS                  )  ) |
<a name="l00365"></a>00365                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ac5bf6d898d9d81323fcb48e440ebea24">shortInputs</a> ?  DAC_OPACTRL_OPA1SHORT    : 0 ) |
<a name="l00366"></a>00366                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a94ac20bd14716b2826e9100ab5a69efe">lpfPosPadDisable</a> ?
<a name="l00367"></a>00367                                      DAC_OPACTRL_OPA1LPFDIS_PLPFDIS : 0 ) |
<a name="l00368"></a>00368                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ae7f7cea11df855842be350561162d118">lpfNegPadDisable</a> ?
<a name="l00369"></a>00369                                      DAC_OPACTRL_OPA1LPFDIS_NLPFDIS : 0 ) |
<a name="l00370"></a>00370                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a05ded6707730217045bf21a46352b59c">hcmDisable</a>  ?  DAC_OPACTRL_OPA1HCMDIS   : 0 ) |
<a name="l00371"></a>00371                     ( DAC_OPACTRL_OPA1EN                                );
<a name="l00372"></a>00372   }
<a name="l00373"></a>00373   <span class="keywordflow">else</span> <span class="comment">/* OPA2 */</span>
<a name="l00374"></a>00374   {
<a name="l00375"></a>00375     EFM_ASSERT( ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a741a04cddfb63d061d62332bac59378c">posSel</a> == DAC_OPA2MUX_POSSEL_DISABLE ) ||
<a name="l00376"></a>00376                 ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a741a04cddfb63d061d62332bac59378c">posSel</a> == DAC_OPA2MUX_POSSEL_POSPAD  ) ||
<a name="l00377"></a>00377                 ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a741a04cddfb63d061d62332bac59378c">posSel</a> == DAC_OPA2MUX_POSSEL_OPA1INP ) ||
<a name="l00378"></a>00378                 ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a741a04cddfb63d061d62332bac59378c">posSel</a> == DAC_OPA2MUX_POSSEL_OPATAP  )    );
<a name="l00379"></a>00379 
<a name="l00380"></a>00380     EFM_ASSERT( ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a348668e49c063b1393a62d74ca14fbf1">outMode</a> &amp; ~DAC_OPA2MUX_OUTMODE ) == 0 );
<a name="l00381"></a>00381 
<a name="l00382"></a>00382     EFM_ASSERT( ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a30a43beed36d471a1b0d1d64d451baf1">outPen</a> &amp; ~_DAC_OPA2MUX_OUTPEN_MASK ) == 0 );
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     dac-&gt;BIASPROG = ( dac-&gt;BIASPROG
<a name="l00385"></a>00385                       &amp; ~( _DAC_BIASPROG_OPA2BIASPROG_MASK         |
<a name="l00386"></a>00386                             DAC_BIASPROG_OPA2HALFBIAS                )  ) |
<a name="l00387"></a>00387                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a24798b555f452ada8fa38c63c6ab6ff9">bias</a>   &lt;&lt; _DAC_BIASPROG_OPA2BIASPROG_SHIFT  ) |
<a name="l00388"></a>00388                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a880893ce7955f55338fc6ec772ba2f49">halfBias</a>   ? DAC_BIASPROG_OPA2HALFBIAS  : 0 );
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     <span class="keywordflow">if</span> ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#add09b8acf3961a7b67f4275b534ed064">defaultOffset</a> )
<a name="l00391"></a>00391     {
<a name="l00392"></a>00392       offset = <a class="code" href="group__SYSTEM.html#ga786913c991338e29650617d89aec3768" title="Get factory calibration value for a given peripheral register.">SYSTEM_GetCalibrationValue</a>( &amp;dac-&gt;OPAOFFSET );
<a name="l00393"></a>00393       dac-&gt;OPAOFFSET = ( dac-&gt;OPAOFFSET &amp; ~_DAC_OPAOFFSET_OPA2OFFSET_MASK ) |
<a name="l00394"></a>00394                        ( offset         &amp;  _DAC_OPAOFFSET_OPA2OFFSET_MASK );
<a name="l00395"></a>00395     }
<a name="l00396"></a>00396     <span class="keywordflow">else</span>
<a name="l00397"></a>00397     {
<a name="l00398"></a>00398       EFM_ASSERT( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aa0980b3036467a9bd446d6dca743449f">offset</a> &lt;= ( _DAC_OPAOFFSET_OPA2OFFSET_MASK &gt;&gt;
<a name="l00399"></a>00399                                     _DAC_OPAOFFSET_OPA2OFFSET_SHIFT   ) );
<a name="l00400"></a>00400       dac-&gt;OPAOFFSET = ( dac-&gt;OPAOFFSET &amp; ~_DAC_OPAOFFSET_OPA2OFFSET_MASK ) |
<a name="l00401"></a>00401                        ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aa0980b3036467a9bd446d6dca743449f">offset</a> &lt;&lt;  _DAC_OPAOFFSET_OPA2OFFSET_SHIFT );
<a name="l00402"></a>00402     }
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     dac-&gt;OPA2MUX  = (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ae2462a6a70fb61bc77b97e1e7ee40523">resSel</a>                                |
<a name="l00405"></a>00405                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a348668e49c063b1393a62d74ca14fbf1">outMode</a>                               |
<a name="l00406"></a>00406                     init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a30a43beed36d471a1b0d1d64d451baf1">outPen</a>                                          |
<a name="l00407"></a>00407                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aef9d4d625bd15dce05797699e70088ea">resInMux</a>                              |
<a name="l00408"></a>00408                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a46da494ce7f49c18b98d8e6c378624a3">negSel</a>                                |
<a name="l00409"></a>00409                     (uint32_t)init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a741a04cddfb63d061d62332bac59378c">posSel</a>                                |
<a name="l00410"></a>00410                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#aa35bd216eb267a79ad629d7dfb6cfba8">nextOut</a>     ? DAC_OPA2MUX_NEXTOUT       : 0 ) |
<a name="l00411"></a>00411                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ab07747ad69d9f957057cb91fec255e49">npEn</a>        ? DAC_OPA2MUX_NPEN          : 0 ) |
<a name="l00412"></a>00412                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a7df75dbac7c4f26ceccd021ed2267a88">ppEn</a>        ? DAC_OPA2MUX_PPEN          : 0 );
<a name="l00413"></a>00413 
<a name="l00414"></a>00414     dac-&gt;OPACTRL  = ( dac-&gt;OPACTRL
<a name="l00415"></a>00415                       &amp; ~(  DAC_OPACTRL_OPA2SHORT                  |
<a name="l00416"></a>00416                            _DAC_OPACTRL_OPA2LPFDIS_MASK            |
<a name="l00417"></a>00417                             DAC_OPACTRL_OPA2HCMDIS                   )  ) |
<a name="l00418"></a>00418                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ac5bf6d898d9d81323fcb48e440ebea24">shortInputs</a> ?  DAC_OPACTRL_OPA2SHORT    : 0 ) |
<a name="l00419"></a>00419                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a94ac20bd14716b2826e9100ab5a69efe">lpfPosPadDisable</a> ?
<a name="l00420"></a>00420                                      DAC_OPACTRL_OPA2LPFDIS_PLPFDIS : 0 ) |
<a name="l00421"></a>00421                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#ae7f7cea11df855842be350561162d118">lpfNegPadDisable</a> ?
<a name="l00422"></a>00422                                      DAC_OPACTRL_OPA2LPFDIS_NLPFDIS : 0 ) |
<a name="l00423"></a>00423                     ( init-&gt;<a class="code" href="structOPAMP__Init__TypeDef.html#a05ded6707730217045bf21a46352b59c">hcmDisable</a>  ?  DAC_OPACTRL_OPA2HCMDIS   : 0 ) |
<a name="l00424"></a>00424                     ( DAC_OPACTRL_OPA2EN                                );
<a name="l00425"></a>00425   }
<a name="l00426"></a>00426 }
<a name="l00427"></a>00427 
<a name="l00431"></a>00431 <span class="preprocessor">#endif </span><span class="comment">/* defined( OPAMP_PRESENT ) &amp;&amp; ( OPAMP_COUNT == 1 ) */</span>
</pre></div></div>
<div id="footer">
<hr size="1"><address style="text-align: right;"><small>
Generated on Thu May 28 06:12:27 2015</small> for Silicon Labs EFM32 emlib Peripheral Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a><small> 1.6.3 </small></address></div>
</body>
</html>
